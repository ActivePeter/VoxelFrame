新建个文件专门用来记录 开发过程。遇到的问题。相关知识

## 6.23

下一步，碰撞检测bullet3，or 光照

选中窗口将鼠标隐藏，按退出键恢复鼠标

rendering api 抽象

## 6.22

> 前段时间写机械臂去了

区块使用线程池加载已经完成了，但是存在些许bug，

1. ~~纵向移动至区块加载后会卡死，无论是否为多线程。~~

   上面的bug解决了，是遍历list的时候没有++迭代器...

2. ~~bug2，区块加载中心偏移。应该是正负的原因~~

   已解决

3. ~~bug3，shader会把被遮挡的也渲染出来~~

   已解决，是没有开启深度测试的原因

- [x] 鼠标锁定



## 6.11

### todo

- [x] game周期回调注册
- [x] 为了提高范围遍历性能。在初始化将范围内区块的相对坐标预存到一个数组里
- [x] 将chunk chunkmanager文件分离
- [ ] 

---

销毁检测要低频率，所以要搞一个周期回调注册的功能

销毁要细分为网格销毁和数据销毁，网格销毁为出了视角范围就做销毁，数据销毁在出更大范围时销毁

## 6.10

#### todo

- [x] 添加io register（注册回调
- [x] 添加mainplayer
- [x] 将向前声明移入头文件，解决了需要反复向前声明的问题

----

下一步实现下动态的mesh加载吧。

创建一个函数 在轮询中检查玩家的区块坐标变化，如果变化

重新计算范围内区块的一组，（每次只会绘制范围内的）然后将范围外区块加入销毁队列，

函数内循环对销毁队列进行扫描，每次减少一个倒计时，直到倒计时为0，此时销毁区块

---

销毁区块的具体行为：

清除区块中的顶点信息以及~~方块信息~~，（释放内存

方块信息在更大的范围时才去删除、

清除操作的扫描频率可以降低、

---

> 在这些之前，我要在game下加入一个player的类，用来抽象玩家
>
> 同时他会去绑定graph里的camera，至此要约定一下程序运行流程graph的信息要在game之前初始化

---



## 6.9

材质已经绘制出了

![image-20210609124342573](https://hanbaoaaa.xyz/tuchuang/images/2021/06/09/image-20210609124342573.png)

----

下一步：整理代码结构，去除混乱的include关系

## 6.8

![image-20210609124406146](https://hanbaoaaa.xyz/tuchuang/images/2021/06/09/image-20210609124406146.png)

昨天完成了顶点构建方式的修改，接下来要考虑怎么样设计材质绑定了

首先是我目前的做法是将mc地面分为无穷个三维区块，每次绘制一一个区块为一个单元，遍历方块数据并且构造网格。

------

opengl会先要加载纹理，那么之后任意个chunk，应该都可以共用这一个纹理，

绘制之前，执行glBindTexture

----

然后是顶点坐标了。

再次之前说一下chunk构建的细节

有一个block manager 里面有block id -》blockinfo的一个数组（vector

blockInfo是一个基础类型，它描述了标准的方块的顶点添加信息（多数方块的共性

chunk构建时调用blockinfo内的函数就可以往chunk中增加对应block需要的面

----

但是每种方块就算顶点都一样，其材质肯定是不一样的，所以具体的材质坐标操作需要去重新描述，我目前想的就是继承blockInfo 加入不同的材质坐标添加函数

![image-20210608024352380](https://hanbaoaaa.xyz/tuchuang/images/2021/06/07/image-20210608024352380.png)

现有这个函数已借完成了往网格添加顶点和顶点索引

我们还需要做的就是给顶点设置材质uv 这是一个类似查表的过程，不同的面，对应 四个点，不同的材质uv坐标

## 6.7

昨天已经完成网格绘制了，不过今天研究opengl贴图的时候发现opengl 顶点坐标，贴图坐标，得在一起对应一个顶点，而不能单独的建立顶点索引和贴图索引，所以之前的思路得换，

> 之前的思路是一次性表达完一个区块内的所有顶点，然后用索引去一个个访问，但是现在一个顶点，可能对应有不同的纹理坐标了，比如一个草方块，一个点同时会占有顶面材质坐标和侧面材质坐标

